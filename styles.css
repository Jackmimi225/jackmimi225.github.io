*{box-sizing:border-box}
:root{
  --size:220px;               /* 总体缩放 */
  --ink:#e5e7eb;
  --edge: calc(var(--size)*0.5);
  --grid: repeating-linear-gradient(0deg, rgba(255,255,255,.08) 0 1px, transparent 1px 12px),
          repeating-linear-gradient(90deg, rgba(255,255,255,.08) 0 1px, transparent 1px 12px);
}
html,body{height:100%}
body{
  margin:0;
  background:radial-gradient(1000px 600px at 20% -20%, #243b7a 20%, transparent 60%), #0b0f1a;
  color:var(--ink);
}
.stage{position:fixed; inset:0}
.viewport{position:absolute; inset:0; perspective:1100px; overflow:hidden}
.viewport.flat{ perspective:none }

/* 交互光标/防选中 */
html, body, .stage, .viewport, .dice, .poly, .polyArt { touch-action:none; }
.dice, .poly, .polyArt{
  -webkit-user-select:none; user-select:none;
  -webkit-user-drag:none;
}
.dice,.poly{ cursor:grab }
.poly.grab{ cursor:grabbing }

/* 初始居中（JS 后转为像素定位） */
.dice{
  position:absolute; width:var(--size); height:var(--size);
  left:calc(50vw - var(--size)/2); top:calc(50vh - var(--size)/2);
  transform:translate(0,0);
}

/* ============ 折叠态：用面片画一个“多面体”的观感（模仿图1） ============ */
.poly{ position:absolute; inset:0; transform-style:preserve-3d; transition:transform 1s cubic-bezier(.2,.8,.2,1); z-index:1; }
.polyArt{ position:absolute; inset:0; filter:drop-shadow(0 18px 40px rgba(0,0,0,.45)); }

.face{ position:absolute; left:0; top:0; right:0; bottom:0; margin:auto;
       width:calc(var(--size)*0.92); height:calc(var(--size)*0.92);
       background:
        radial-gradient(120% 120% at 30% 20%, rgba(255,255,255,.28), rgba(255,255,255,0) 60%),
        var(--grid),
        linear-gradient(135deg,#a6b3d6,#7482a6 60%, #3a4666);
       border:1px solid rgba(255,255,255,.22);
}

/* 菱形（中心+四周） */
.rhomb{ clip-path:polygon(50% 2%, 95% 50%, 50% 98%, 5% 50%); }
.rhomb.center{ transform:translateZ(0) rotate(12deg) scale(.93); }
.rhomb.side.top{    transform:translate(0, calc(-1*var(--size)*.22)) rotate(-8deg)  scale(.78); filter:brightness(1.05); }
.rhomb.side.right{  transform:translate(calc(var(--size)*.22), 0)   rotate(22deg)   scale(.80); filter:brightness(.96); }
.rhomb.side.bottom{ transform:translate(0, calc(var(--size)*.22))   rotate(-168deg) scale(.80); filter:brightness(.85); }
.rhomb.side.left{   transform:translate(calc(-1*var(--size)*.22),0) rotate(-158deg) scale(.80); filter:brightness(.92); }

/* 斜切角的三角形 */
.tri{ width:calc(var(--size)*.85); height:calc(var(--size)*.85);
      clip-path:polygon(50% 4%, 96% 96%, 4% 96%);
      filter:brightness(.78); }
.tri.t1{ transform:translate(calc(var(--size)*.02), calc(-1*var(--size)*.28)) rotate(30deg) scale(.65); }
.tri.t2{ transform:translate(calc(-1*var(--size)*.08), calc(var(--size)*.28))  rotate(-150deg) scale(.65); }

/* 松手“摇一摇”时给一个轻微旋转抖动（JS 会控制 transform 值） */

/* ============ 展开态（模仿图2） ============ */
.poly.unfold .polyArt{ opacity:0; pointer-events:none; transition:opacity .25s ease; }
.poly.unfold{ transform:none !important; transform-style:flat; }
.viewport.flat .net{ opacity:1; }

.net{
  position:absolute; left:calc(-1*var(--size)); top:calc(-1*var(--size));
  width:calc(var(--size)*3); height:calc(var(--size)*4);
  opacity:0; transition:opacity .35s ease .05s;
}

/* 方格（热点 1..6） */
.cell{ position:absolute; display:grid; place-items:center; font-weight:800; color:#0f172a; }
.sq{
  width:var(--size); height:var(--size); border-radius:16px;
  background:
    linear-gradient(180deg, rgba(255,255,255,.12), rgba(0,0,0,.0)),
    var(--grid),
    linear-gradient(135deg,#e6ebff,#c5d0ff);
  border:2px solid rgba(255,255,255,.35);
  outline:1px dashed rgba(0,0,0,.08); outline-offset:-6px;
}

/* 将 1..6 排成接近你图2的“条+星”结构（可按需要微调） */
.s1{ left:calc(1*var(--size)); top:calc(1*var(--size)); } /* 中心 */
.s2{ left:calc(1*var(--size)); top:calc(0*var(--size)); } /* 上 */
.s3{ left:calc(2*var(--size)); top:calc(1*var(--size)); } /* 右 */
.s4{ left:calc(0*var(--size)); top:calc(1*var(--size)); } /* 左 */
.s5{ left:calc(1*var(--size)); top:calc(2*var(--size)); } /* 下 */
.s6{ left:calc(1*var(--size)); top:calc(3*var(--size)); } /* 下下（形成“链条”） */

.sq span{ font-size:56px; }

/* 展开网的三角（仅作形态，还原“星形臂”） */
.triN{
  width:var(--size); height:var(--size);
  background:
    linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.0)),
    var(--grid),
    linear-gradient(135deg,#dfe7ff,#b9c9ff);
  border:2px solid rgba(255,255,255,.30);
  clip-path:polygon(50% 6%, 96% 94%, 4% 94%);
  transform-origin:50% 50%;
}

/* 在中心方格周围摆八个三角，形成“星形”感觉（可继续微调角度/位置） */
.tA{ left:calc(2*var(--size)); top:calc(0.6*var(--size)); transform:rotate(35deg)  scale(.85); }
.tB{ left:calc(2.4*var(--size)); top:calc(1.4*var(--size)); transform:rotate(80deg)  scale(.85); }
.tC{ left:calc(1.8*var(--size)); top:calc(2.2*var(--size)); transform:rotate(120deg) scale(.85); }
.tD{ left:calc(1.0*var(--size)); top:calc(2.6*var(--size)); transform:rotate(160deg) scale(.85); }
.tE{ left:calc(0.2*var(--size)); top:calc(2.2*var(--size)); transform:rotate(200deg) scale(.85); }
.tF{ left:calc(-0.2*var(--size));top:calc(1.4*var(--size)); transform:rotate(245deg) scale(.85); }
.tG{ left:calc(0.2*var(--size)); top:calc(0.6*var(--size)); transform:rotate(285deg) scale(.85); }
.tH{ left:calc(1.0*var(--size)); top:calc(0.2*var(--size)); transform:rotate(325deg) scale(.85); }

/* 逐格“走动”的高亮 */
@keyframes pulse {
  0%   { box-shadow:0 0 0 0 rgba(99,102,241,.6); border-color:rgba(99,102,241,.95); }
  100% { box-shadow:0 0 0 14px rgba(99,102,241,0); border-color:rgba(255,255,255,.35); }
}
.cell.active{ animation:pulse .36s ease-out; border-color:rgba(99,102,241,.95)!important; }
.cell.current{ border-color:#60a5fa !important; box-shadow:0 0 0 4px rgba(96,165,250,.25) inset; }

/* 弹窗 */
.modal[hidden]{display:none!important}
.modal{position:fixed; inset:0; display:grid; place-items:center; z-index:50}
.modal__backdrop{position:absolute; inset:0; background:rgba(0,0,0,.45); backdrop-filter:blur(2px)}
.modal__card{
  position:relative; z-index:1; width:min(720px,92vw); min-height:220px;
  background:#0b0f1a; border:1px solid #2a3248; color:#e5e7eb;
  border-radius:16px; overflow:hidden; display:grid; grid-template-columns:40% 1fr;
  box-shadow:0 30px 60px rgba(0,0,0,.5)
}
@media (max-width:720px){ .modal__card{ grid-template-columns:1fr } }
.modal__media{ background:linear-gradient(135deg,#dbeafe,#fde68a); min-height:180px }
.modal__body{ padding:1rem 1.25rem }
.modal__body h3{ margin:.25rem 0 }
.modal__body p{ color:#c7ccd8; margin:.25rem 0 }
.modal__close{ position:absolute; right:10px; top:6px; width:36px; height:36px; border-radius:10px;
  border:1px solid #3b4460; background:#12182a; color:#e5e7eb; cursor:pointer }
.btn{ border:1px solid #3b4460; background:#12182a; color:#e5e7eb; border-radius:10px; padding:.5rem .9rem; display:inline-block; text-decoration:none }
