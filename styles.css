*{box-sizing:border-box}
:root{
  --size:200px;           /* 改它可整体缩放骰子与展开网 */
  --ink:#e5e7eb;
}
html,body{height:100%}
body{
  margin:0;
  background:radial-gradient(1000px 600px at 20% -20%, #243b7a 20%, transparent 60%), #0b0f1a;
  color:var(--ink);
}
.stage{position:fixed; inset:0}
.viewport{position:absolute; inset:0; perspective:1100px; overflow:hidden}
.viewport.flat{ perspective:none }  /* 展开为平面视角，保证正面朝向 */

/* 手势控制：触摸/选择都交给我们 */
html, body, .stage, .viewport, .dice, .cube, .face { touch-action:none; }
.dice, .cube, .face, .netBg{
  -webkit-user-select:none; user-select:none;
  -webkit-user-drag:none;
}
.dice,.cube{ cursor:grab }
.cube.grab{ cursor:grabbing }

/* 初始居中（JS 会改为绝对像素定位） */
.dice{
  position:absolute; width:var(--size); height:var(--size);
  left:calc(50vw - var(--size)/2); top:calc(50vh - var(--size)/2);
  transform:translate(0,0);
}

/* 展开网底图：始终可见，展开时更亮；跟随 dice */
.netBg{
  position:absolute; left:calc(-1*var(--size)); top:calc(-1*var(--size));
  width:calc(var(--size)*3); height:calc(var(--size)*4);
  background:
    radial-gradient(900px 540px at 90% -20%, rgba(99,102,241,.15), transparent),
    url('assets/world.jpg');
  background-size:cover; background-position:center;
  border-radius:20px; opacity:.25; transition:opacity .6s ease;
  pointer-events:none; z-index:0;
}
.dice.unfolding .netBg{ opacity:.9 }

/* 3D 骰子体 */
.cube{
  position:absolute; inset:0;
  transform-style:preserve-3d;
  transition:transform 1s cubic-bezier(.2,.8,.2,1);
  z-index:1;
}
.face{
  position:absolute; inset:0; display:grid; place-items:center;
  font-weight:800; font-size:56px; color:#0f172a;
  background:#fff; border-radius:16px; border:2px solid rgba(255,255,255,.35);
  box-shadow:inset 0 0 0 2px rgba(0,0,0,.03);
  outline:1px dashed rgba(0,0,0,.08);
  outline-offset:-6px;
  transition:border-color .2s ease, box-shadow .2s ease, transform 1s cubic-bezier(.25,.9,.2,1);
}
.face span{pointer-events:none}
.face--front{ transform:translateZ(calc(var(--size)/2)) }
.face--back{  transform:rotateY(180deg) translateZ(calc(var(--size)/2)) }
.face--right{ transform:rotateY(-90deg) translateZ(calc(var(--size)/2)) }
.face--left{  transform:rotateY(90deg) translateZ(calc(var(--size)/2)) }
.face--top{   transform:rotateX(90deg) translateZ(calc(var(--size)/2)) }
.face--bottom{transform:rotateX(-90deg) translateZ(calc(var(--size)/2)) }

.face--top{background:linear-gradient(135deg,#e0f2fe,#ffffff)}
.face--bottom{background:linear-gradient(135deg,#fee2e2,#ffffff)}
.face--front{background:linear-gradient(135deg,#e9d5ff,#ffffff)}
.face--back{background:linear-gradient(135deg,#fde68a,#ffffff)}
.face--right{background:linear-gradient(135deg,#bbf7d0,#ffffff)}
.face--left{background:linear-gradient(135deg,#c7d2fe,#ffffff)}

/* 哪个数字朝上（收拢状态） */
.cube.show-1{transform:rotateX(0) rotateY(0)}
.cube.show-2{transform:rotateX(-90deg) rotateY(0)}
.cube.show-3{transform:rotateX(0) rotateY(-90deg)}
.cube.show-4{transform:rotateX(0) rotateY(90deg)}
.cube.show-5{transform:rotateX(90deg) rotateY(0)}
.cube.show-6{transform:rotateX(180deg) rotateY(0)}

/* 展开：将立方体旋转归零，确保平面正对观众 */
.cube.unfold{
  transform:none !important;
  transform-style:flat;
}
.cube.unfold .face--front { transform:translateZ(0) }
.cube.unfold .face--top   { transform:translateZ(0) translate3d(0,calc(-1*var(--size)),0) }
.cube.unfold .face--bottom{ transform:translateZ(0) translate3d(0,var(--size),0) }
.cube.unfold .face--left  { transform:translateZ(0) translate3d(calc(-1*var(--size)),0,0) }
.cube.unfold .face--right { transform:translateZ(0) translate3d(var(--size),0,0) }
.cube.unfold .face--back  { transform:translateZ(0) translate3d(0,calc(2*var(--size)),0) }

/* 逐格“走动”的高亮效果 */
@keyframes pulse {
  0%   { box-shadow:0 0 0 0 rgba(99,102,241,.6); border-color:rgba(99,102,241,.95); }
  100% { box-shadow:0 0 0 14px rgba(99,102,241,0); border-color:rgba(255,255,255,.35); }
}
.face.active{
  animation:pulse .36s ease-out;
  border-color:rgba(99,102,241,.95);
}
.face.current{                /* 停留的格子（静态高亮一点点） */
  border-color:#60a5fa !important;
  box-shadow:0 0 0 4px rgba(96,165,250,.25) inset;
}

/* 弹窗（作品） */
.modal[hidden]{display:none!important}
.modal{position:fixed; inset:0; display:grid; place-items:center; z-index:50}
.modal__backdrop{position:absolute; inset:0; background:rgba(0,0,0,.45); backdrop-filter:blur(2px)}
.modal__card{
  position:relative; z-index:1; width:min(720px,92vw); min-height:220px;
  background:#0b0f1a; border:1px solid #2a3248; color:#e5e7eb;
  border-radius:16px; overflow:hidden; display:grid; grid-template-columns:40% 1fr;
  box-shadow:0 30px 60px rgba(0,0,0,.5)
}
@media (max-width:720px){ .modal__card{ grid-template-columns:1fr } }
.modal__media{ background:linear-gradient(135deg,#dbeafe,#fde68a); min-height:180px }
.modal__body{ padding:1rem 1.25rem }
.modal__body h3{ margin:.25rem 0 }
.modal__body p{ color:#c7ccd8; margin:.25rem 0 }
.modal__close{ position:absolute; right:10px; top:6px; width:36px; height:36px; border-radius:10px;
  border:1px solid #3b4460; background:#12182a; color:#e5e7eb; cursor:pointer }
.btn{ border:1px solid #3b4460; background:#12182a; color:#e5e7eb; border-radius:10px; padding:.5rem .9rem; display:inline-block; text-decoration:none }
